<!DOCTYPE html>
<html>
  <head>
    <title>upload.html</title>
	
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
    <link rel="stylesheet" href="../css/bootstrap.css">
	<link rel="stylesheet" href="../css/font-awesome.css">
    <link rel="stylesheet" href="../css/fileinput.css" media="all"  type="text/css" />	

  </head>
  
  <body>
  		<div class="col-sm-3">
  		</div>
		<div class="col-sm-6" >
            <form enctype="multipart/form-data" action="<%=path%>/material/upload" method="post">
                
                <div class="form-group">
                    <input id="file-0" type="file" name="file" multiple class="file" data-overwrite-initial="false" data-min-file-count="1" data-max-file-count="1"/>
                </div>
                
                <div class="control-group" style="display:none;">
                	<label class="control-label" for="fileName">文件名</label>
                    <input  type="text" name="fileName" id="fileName" />
                </div>
                
                <hr>
              <div class="form-group">
						<div class="controls">
							<button class="btn" type="submit" style="float:right">生成报表</button>
						</div>
			  </div>
               
            </form>
        </div>
        <div class="col-sm-3">
  		</div>
        
	<script src="../js/jquery.js"></script>
	<script src="../js/bootstrap.js"></script>
    <script src="../js/fileinput.js" type="text/javascript"></script>
    <script src="../js/fileinput_locale_zh.js" type="text/javascript"></script>
    <script>
	  
	    $("#file-0").fileinput({
	    	language: 'zh', 
	        uploadUrl: '/gtjaqh-weixin/material/uploadfile', // you must set a valid URL here else you will get an error
	        allowedFileExtensions : ['xls','xlsx'],
	        overwriteInitial: false,
	        maxFileSize: 1000,
	        maxFilesNum: 10,
	        //allowedFileTypes: ['image', 'video', 'flash'],
	        slugCallback: function(filename) {
	            return filename.replace('(', '_').replace(']', '_');
	        }
		});
		
		 $("#file-0").on("fileuploaded", function (event, data, previewId, index) {
		 	document.getElementById('fileName').value = data.files[0].name;
	      console.log(data);
    	});
	
		</script>

  </body>
</html>
